\documentclass{pracamgr}

\usepackage{polski}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}

\usepackage{subfig} % Subfigures

\author{Maciej Pazurkiewicz}
\nralbumu{248267}

\title{Modelowanie sygnalizacji świetlnej}

\tytulang{Modelling of a traffic lights system}
\kierunek{Informatyka}

\opiekun{dra hab. Sławomira Lasoty\\
  Instytut Informatyki
  }
% miesiąc i~rok:
\date{Wrzesień 2011}

%Podać dziedzinę wg klasyfikacji Socrates-Erasmus:
\dziedzina{ 
11.3 Informatyka\\ 
}

%Klasyfikacja tematyczna wedlug AMS (matematyka) lub ACM (informatyka)
\klasyfikacja{D. Software\\
  D.2. Software engineering\\
  D.2.4. Software/Program verification}

% Słowa kluczowe:
\keywords{}

% Moje makra
\newtheorem{defi}{Definicja}[section]
\newcommand{\ang}[1]{(ang.~\emph{#1})}

\begin{document}
\maketitle

\begin{abstract}
streszczenie
\end{abstract}

\tableofcontents

\chapter*{Wprowadzenie}
\addcontentsline{toc}{chapter}{Wprowadzenie}

\chapter{Sygnalizacja świetlna}
\label{c:sygnalizacja}

Niniejszy rozdział zawiera informacje o systemach sygnalizacji
świetlnej niezbędne w dalszej części pracy. Podrozdział
\ref{s:sygn-wprowadzenie} jest wprowadzeniem do tematyki sygnalizacji,
natomiast podrozdział \ref{s:sygn-szczegoly} szczegółowo omawia
funkcjonowanie sygnalizacji wzbudzanej, będącej bazowym modelem
przedstawianego języka.

Informacje o systemach sygnalizacji zawarte w niniejszym rozdziale
oparte są na raportach przygotowanych na zlecenie amerykańskiej
agencji \emph{Federal Highway Administration} \cite{timing}
\cite{handbook}.

\section{Wprowadzenie}
\label{s:sygn-wprowadzenie}

Sygnalizacją świetlną nazywamy zestaw urządzeń przekazujących
komunikaty, służące do segregacji czasowej kolidujących potoków
ruchu. Stosuje się ją najpowszechniej na skrzyżowaniach i przejściach
dla pieszych, lecz wykorzystywana jest także w miejscach takich jak
przejazdy kolejowe, drogi o ruchu wahadłowym lub drogi o pasach o
zmiennym kierunku ruchu.

Poprawnie zaprojektowana sygnalizacja świetlna powinna zmniejszać
prawdopodobieństwo wypadków i kolizji oraz zapewniać odpowiedni poziom
dostępności dla pieszych i pojazdów nadjeżdżających z kierunków
podporządkowanych, jednocześnie zachowując jak największą wydajność
skrzyżowania (tj. maksymalizować jego przepustowość i minimalizować
czas oczekiwania na sygnał zielony).  Zapewnienie równowagi pomiędzy
bezpieczeństwem a wydajnością należy do kluczowych elementów projektu
sygnalizacji.

\subsection{Elementy systemu sygnalizacji świetlnej}
\label{ss:elementy}
Najprostszy system sygnalizacji składa się z sygnalizatora oraz
kontrolera, czyli układu logicznego decydującego o wyświetlanym
sygnale. Współczesne systemy są często o wiele bardziej skomplikowane
i mogą zawierać komponenty takie jak:
\begin{description}
  \item[czujniki] -- urządzenia, które zbierają informację o aktualnym
  zapotrzebowaniu na prawo przejazdu bądź przejścia różnych
  uczestników ruchu, np. pętle indukcyjne w jezdni dla pojazdów bądź
  przyciski dla pieszych;
  \item[kontroler lokalny] -- urządzenie zarządzające pracą grupy
  ściśle powiązanych sygnalizatorów, np. sterujących ruchem na jednym
  skrzyżowaniu;
  \item[kontroler główny] -- urządzenie zarządzające pracą grupy
  kontrolerów lokalnych; może być odpowiedzialny np. za synchronizację
  sygnalizacji na ciągu skrzyżowań.
\end{description}

\subsection{Tryby pracy}
\label{ss:tryby}
Sygnalizacja świetlna na skrzyżowaniach pracuje przeważnie w trybie
stałoczasowym, wzbudzanym lub kombinacji obydwu.

\paragraph{Sygnalizacja stałoczasowa}
W trybie stałoczasowym każdy z sygnałów dla każdego potoku ma z góry
określoną długość.

\paragraph{Sygnalizacja wzbudzana}
W trybie wzbudzanym kontroler korzysta z informacji dostarczanych
przez czujniki, dzięki czemu może dostosować parametry pracy
sygnalizacji do aktualnych warunków ruchu. W zależności od tego czy
czujniki są zainstalowane dla wszystkich potoków czy tylko dla
niektórych mówimy o sygnalizacji \emph{w pełni wzbudzanej}
\ang{fully-actuated} lub \emph{częściowo wzbudzanej}
\ang{semi-actuated}.

W systemach w pełni wzbudzanych sygnalizacja dla każdego z potoków
jest uzależniona od danych dostarczonych przez czujnik. W
szczególności oznacza to, że w danym cyklu sygnał zielony otrzymują
tylko te fazy, na które jest zapotrzebowanie. Co więcej jego długość może być
uzależniona od liczby oczekujących pojazdów.

W systemach częściowo wzbudzanych detekcja ruchu dotyczy tylko
niektórych potoków ruchu, np. pieszych bądź pojazdów nadjeżdżających z
drogi podrzędnej. Prawo przejazdu jest domyślnie przyznawane
kierunkowi głównemu; pozostałe zaś mogą je otrzymać w wyniku
zapotrzebowania zgłoszonego przez czujnik.

\section{Sygnalizacja wzbudzana}
\label{s:sygn-szczegoly}

Niniejszy podrozdział zawiera szczegółową charakterystykę
funkcjonowania sygnalizacji wzbudzanej. Najpierw definiowane są
podstawowe pojęcia potrzebne do precyzyjnej jej specyfikacji,
następnie zaś przedstawiony jest hierarchiczny opis systemu: od omówienia
pracy pojedynczego sygnalizatora po omówienie pracy całości
sygnalizacji na skrzyżowaniu.

\subsection{Podstawowe pojęcia}
\label{ss:pojecia}

\subsubsection{Definicje}
\label{ss:definicje}
Podstawowe pojęcia związane z systemami sygnalizacji świetlnej:
\begin{description}
  \item[interwał] -- odcinek czasu, w którym wskazanie danego
  sygnalizatora nie zmienia się; w zależności od tego wskazania mówimy
  o \emph{interwale zielonym}, \emph{interwale żółtym} itp.
  \item[potok ruchu] -- pojazdy bądź piesi, których ruch kontrolowany
  jest przez jeden sygnalizator;
  \item[faza] -- grupa potoków ruchu, którym sygnalizacja zezwala na jednoczesne
  korzystanie ze skrzyżowania;
  \item[cykl] -- ustalony ciąg faz
\end{description}

\subsubsection{Stany sygnalizatora}
Sygnalizator dla pojazdów może znajdować się w jednym z pięciu stanów:
\begin{description}
  \item[czerwony] -- oznacza zakaz wjazdu na skrzyżowanie
  \item[czerwono-żółty] -- oznacza zakaz wjazdu i informuje o tym, że
  wkrótce pojawi się sygnał zielony
  \item[zielony] -- oznacza zezwolenie na wjazd
  \item[żółty]  -- oznacza zakaz wjazdu i informuje o tym, że wkrótce
  pojawi się sygnał czerwony
  \item[czerwony-czyszczący] -- oznacza zakaz wjazdu; pozwala ostatnim
  pojazdom na opuszczenie skrzyżowania przed włączeniem sygnału
  zielonego dla potoku kolizyjnego
\end{description}

Sygnalizator dla pieszych nie ma stanu czerwono-żółtego, a zamiast
żółtego ma \emph{migający zielony}. Stany czerwono-żółty,
żółty. migający zielony oraz czerwony-czyszczący nazywamy
\emph{przejściowymi.}

Potoki, których sygnalizatory są w sygnale zielonym lub jednym z
przejściowym nazywamy \emph{aktywnymi}, pozostałe zaś
\emph{nieaktywnymi}. Analogicznie, fazę, której przynajmniej jeden
potok jest aktywny nazywamy aktywną. W danym momencie aktywna może być
co najwyżej jedna faza.

\subsection{Detekcja ruchu}
\label{ss:detekcja}
Mając na celu opis systemów wzbudzanych, rozszerzamy zestaw
definicji z \ref{ss:definicje} o następujące pojęcia:
\begin{description}
  \item[zgłoszenie] -- informacja o zapotrzebowaniu na uruchomienie
  bądź przedłużenie sygnału zielonego przekazywana odpowiedniemu
  kontrolerowi przez czujnik
  \item[zgłoszenie przeciwne] -- zgłoszenie pochodzące od
  nieaktywnego potoku
\end{description}

\paragraph{Czujniki dla pojazdów} Czujniki wykrywające pojazdy
charakteryzowane mogą pracować w jednym z dwóch trybów:
\emph{pulsacyjnym} bądź \emph{obecności}.  W trybie pulsacyjnym
\ang{pulse mode} czujnik jest wzbudzany tylko w momencie pojawienia
się pojazdu w zasięgu jego działania.  Natomiast w trybie obecności
\ang{presence mode} czujnik pozostaje wzbudzony przez cały czas od
pojawienia się pojazdu w strefie detekcji aż do jej
opuszczenia. Zgłoszenie ma zatem postać sygnału punktowego w przypadku
trybu pulsacyjnego oraz ciągłego dla trybu obecności.

\paragraph{Czujniki dla pieszych} Pieszy informuje o 

\subsection{Schemat funkcjonowania sygnalizacji dla pojedynczego potoku}
\label{ss:schemat}

\paragraph{Cele} Bazowy schemat działania
sygnalizacji wzbudzanej powinien spełniać trzy podstawowe warunki:
\begin{enumerate}
  \item sygnał zielony jest przyznawany tylko, gdy wcześniej wykryto
  oczekujące nań pojazdy;
  \item długość sygnału zielonego powinna być uzależniona od natężenia
  ruchu w danym potoku;
  \item długość oczekiwania na sygnał zielony powinna być z góry ograniczona.
\end{enumerate}

\paragraph{Opis działania} W celu realizacji powyższych założeń, interwał
zielony dzielimy na dwie części: \emph{początkową} oraz
\emph{rozszerzalną}. Długość części początkowej jest stała i określana
przez parametr \emph{minimalny zielony}. Powinien on wynosić co
najmniej tyle, aby pozwalać na bezpieczne opuszczenie skrzyżowania
wszystkim pojazdom znajdującym się między czujnikiem a linią
zatrzymania.

Długość części rozszerzalnej zależy od natężenia ruchu. W
momencie otrzymania zgłoszenia sygnał zielony przedłużany jest o tyle,
aby przejeżdżający pojazd mógł bezpiecznie opuścić skrzyżowanie (o
długości tego czasu tym decyduje inny parametr -- \emph{wydłużenie}). Gdy w tym
czasie kontroler nie otrzyma kolejnego zgłoszenia (tj. wykryta została
luka pomiędzy nadjeżdżającymi pojazdami), sygnał zielony zostaje
przerwany (patrz rys. \ref{img:gap-out}).

\begin{figure}[ht]
  \centering
  \includegraphics[width=0.7\textwidth]{img/signals-gap-out}
  \caption{Zakończenie sygnału zielonego przez wykrycie luki.}
\label{img:gap-out}
\end{figure}

Duże natężenie ruchu w danym potoku mogłoby powodować brak luk między
pojazdami i -- co za tym idzie~-- zbyt duże opóźnienia w obsłudze
pozostałych potoków. Aby ograniczyć z góry czas oczekiwania, określa
się maksymalny czas, przez który potok może otrzymywać sygnał zielony
w obecności zgłoszenia przeciwnego (patrz
rys. \ref{img:max-out}). Należy podkreślić, że w razie braku
zgłoszenia przeciwnego sygnał zielony będzie nadawany tak długo aż nie
nastąpi wykrycie luki.
\begin{figure}[ht]
  \centering
  \includegraphics[width=0.7\textwidth]{img/signals-max-out}
  \caption{Zakończenie sygnału zielonego przez wykorzystanie
    maksymalnego czasu.}
\label{img:max-out}
\end{figure}

\paragraph{Potoki pieszych} Tak jak w przypadku pojazdów potok pieszy
otrzymuje sygnał zielony tylko w wyniku zgłoszonego
zapotrzebowania. Jednak jako, że ilościowa ocena poziomu
zapotrzebowania w przypadku ruchu pieszych jest trudna technicznie,
przyjmujemy stałą długość interwału zielonego.

\subsection{Opis funkcjonowania sygnalizacji dla pojedynczej fazy}

Podstawowym elementem opisu fazy jest stwierdzenie, które potoki
wchodzą w jej skład. Faza może obejmować:
\begin{itemize}
  \item jeden lub więcej potoków pojazdów,
  \item jeden lub więcej potoków pieszych,
  \item kombinację pewnej liczby potoków pojazdów i pieszych.
\end{itemize}
\begin{figure}[h]
  \centering
  \subfloat[Faza wyłącznie dla pojazdów]{
    \includegraphics[width=0.27\textwidth]{img/signals-phase-example-1}
  }
  \hfill
  \subfloat[Faza dla pojazdów oraz pieszych]{
    \includegraphics[width=0.27\textwidth]{img/signals-phase-example-2}
  }
  \hfill
  \subfloat[Faza wyłącznie dla pieszych \ang{pedestrian scramble, X~crossing}]{
    \includegraphics[width=0.27\textwidth]{img/signals-phase-example-3}
  }
  \caption{Przykładowe fazy}
\end{figure}

Fazy składające się z wielu potoków dopuszczają większą liczbę
możliwych scenariuszy, a więc ich opis może być bardziej złożony.
Należy zdecydować w jaki sposób obsługiwać \emph{zgłoszenia późne}
tj. zgłoszenia od potoków nieaktywnych, które otrzymano już po tym,
gdy faza stała się aktywna. Po pierwsze można uznać, że zostaną
obsłużone dopiero w następnym cyklu sygnalizacji (w takim wypadku
traktowane są tak samo jak zgłoszenia przeciwne). Drugą możliwoscią
jest obsługiwanie takich zgłoszeń w bieżącym cyklu, o ile pozwala nie
spowoduje to przekroczenia maksymalnej długości sygnału zielonego.

Innym elementem projektu wielopotokowej fazy jest ustalenie zachowania
się systemu w przypadku, gdy w jednym z aktywnych potoków wykryta
została luka, w innym zaś mamy do czynienia z ciągłym
zapotrzebowaniem. Możemy nie podejmować żadnego specjalnego działania
tj. wyłączyć sygnał zielony dla potoku, w którym czujnik wykrył lukę.
Można w takim przypadku zastosować procedurę \emph{podtrzymania
  sygnału} \ang{hold}. Polega ona na wydłużeniu sygnału aż do momentu,
w którym zakończą się sygnały zielone dla pozostałych potoków.

\subsection{Opis funkcjonowania sygnalizacji dla cyklu}
Opis cyklu zawiera przede wszystkim informację o kolejności
wchodzących w jego skład faz.
\begin{figure}[h]
  \centering
  \includegraphics[width=0.7\textwidth]{img/signals-cycle-example}
  \caption{Przykładowy cykl}
\end{figure}

Jedyną dodatkową decyzją pozostającą do podjęcia na tym etapie jest
zachowanie się sygnalizacji w przypadku braku zgłoszeń tj. w
\emph{stanie spoczynku} \ang{rest}. Stosowane są dwa rozwiązania. Po
pierwsze wszystkie sygnalizatory mogą wyświetlać sygnał czerwony
\ang{rest in red}. Po drugie można wybrać fazę domyślną, która będzie
aktywna w przypadku braku jakiegokolwiek zapotrzebowania.

\subsection{Podsumowanie}
\begin{table}[ht]
  \centering
  \caption{Parametry definiowane przez poszczególne warstwy opisu systemu sygnalizacji}
  \begin{tabular}{|r|p{8cm}|}
    \hline
    Potok ruchu & długości interwałów
    \begin{itemize}
      \item interwały przejściowe
      \item parametry decydujące o długości interwału zielonego
    \end{itemize} \\\hline
    Faza & potoki składające się na fazę  \\
    & czas maksymalny \\
    & obsługa późnych zgłoszeń \\
    & podtrzymywanie sygnału zielonego \\\hline
    Cykl & fazy wchodzące w skład cyklu i ich kolejność \\
    & faza obsługiwana w przypadku braku zgłoszeń \\\hline
  \end{tabular}
\end{table}

\chapter{Automaty czasowe}
\label{c:ta}

W niniejszym rozdziale przedstawiono automaty czasowe czyli formalizm
służący do modelowania

\section{Automaty czasowe}

\section{UPPAAL}

\begin{thebibliography}{99}
\addcontentsline{toc}{chapter}{Bibliografia}

% http://ops.fhwa.dot.gov/publications/fhwahop06006/form_dot_1700.htm
\bibitem[FHWA06]{handbook} Robert L. Gordon, Warren Tighe,
\textit{Traffic Control Systems Handbook}, Federal Highway
Administration, 2006.

% http://ops.fhwa.dot.gov/publications/fhwahop08024/doc_page.htm
\bibitem[FHWA08]{timing} Peter Koonce i in., \textit{Traffic Signal
  Timing Manual}, Federal Highway Administration, 2008.

\end{thebibliography}

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% coding: utf-8
%%% eval: (auto-fill-mode 1)
%%% End:

% LocalWords:  stałoczasowa
